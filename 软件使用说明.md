# TradeAnalytics 股票成交量分析系统 - 使用说明

<div align="center">

**智能筛选成交量暴涨股票 | 全自动分析 | 微信推送通知**

版本 2.0 | 完全免费 | 开源项目

</div>

---

## 📖 目录

- [软件简介](#软件简介)
- [主要功能](#主要功能)
- [界面展示](#界面展示)
- [快速入门](#快速入门)
- [功能详解](#功能详解)
- [配置说明](#配置说明)
- [常见问题](#常见问题)

---

## 软件简介

TradeAnalytics 是一款专业的股票技术分析工具，专注于发现成交量暴涨的潜力股票。系统每天自动下载最新股票数据，通过技术指标筛选符合条件的股票，并可将分析结果自动推送到您的微信，让您第一时间掌握市场机会。

### 核心特点

- 🎯 **精准筛选** - 自动发现成交量≥5倍且价格突破均线的股票
- 📊 **专业分析** - K线图直观展示量价关系和技术指标
- 🤖 **全自动化** - 配置定时任务，每天自动执行无需人工干预
- 📱 **微信推送** - 支持企业微信、Server酱等多种推送方式
- 📈 **历史趋势** - 对比近期数据，自动识别连续强势股
- 💰 **完全免费** - 开源项目，无需付费，无功能限制

### 适用人群

- ✅ 个人投资者 - 发现潜在投资机会
- ✅ 短线交易者 - 捕捉成交量异动信号
- ✅ 投资团队 - 多人共享分析结果
- ✅ 量化研究 - 验证技术指标策略

---

## 主要功能

### 1. 数据管理

**自动下载股票数据**
- 支持BaoStock和AkShare两个数据源
- 自动下载A股所有股票的历史数据
- 智能增量更新，只下载缺失数据
- 多线程并行下载，速度快

**数据覆盖**
- A股全市场：沪深主板、创业板、科创板
- 历史数据：最近150天交易数据
- 自动更新：每天自动获取最新数据

### 2. 成交量分析

**核心筛选逻辑**
```
条件1: 当日成交量 ≥ 前7日平均成交量 × 5倍
条件2: 收盘价 > N日均线（默认20日）
结果: 同时满足两个条件的股票
```

**分析特点**
- ✅ 自动分析全市场4000+只股票
- ✅ 按成交量倍数排序，最强的在前
- ✅ 显示详细数据：价格、均线、倍数、涨幅
- ✅ 支持导出结果为CSV文件

### 3. K线图可视化

**图表功能**
- 📈 价格走势图（蜡烛图）
- 📉 20日/60日均线
- 📊 成交量柱状图（红涨绿跌）
- 🔍 前后导航浏览多只股票
- 💾 支持导出图片

**技术指标**
- 移动平均线（MA）
- 成交量对比
- 价格相对均线位置

### 4. 微信推送

**推送内容**
```markdown
📊 今日摘要
- 符合条件股票数量
- 筛选规则说明

📈 近N日趋势  
- 历史数据对比
- 趋势图标标识

⭐ 连续强势股
- 自动识别连续出现的股票
- 重点关注对象

💎 今日股票详情
- 代码、名称、价格
- 成交量倍数
- 技术指标
```

**支持的推送方式**
- 企业微信群机器人（推荐）- 免费、无限次、多人共享
- Server酱 - 个人推送，简单易用
- PushPlus - 免费200次/天
- 微信公众号 - 需要认证，适合企业

### 5. 定时任务

**自动执行流程**
```
每天15:30（收盘后30分钟）
    ↓
自动下载最新数据
    ↓
执行成交量分析
    ↓
筛选符合条件股票
    ↓
推送结果到微信
    ↓
保存结果和日志
```

**配置方式**
- Windows任务计划程序
- 支持自定义执行时间
- 只在交易日执行
- 完全后台运行

---

## 界面展示

### 主界面

![主界面](screenshots/main_interface.png)

**功能区域**
- **左侧** - 功能按钮区
  - 下载股票列表
  - 下载历史数据
  - 开始筛选
  - 成交量分析
  
- **右侧** - 结果展示区
  - 股票列表表格
  - 排序和筛选
  - 双击查看K线图

- **底部** - 状态栏
  - 显示当前操作状态
  - 进度条
  - 结果统计

### K线图界面

![K线图](screenshots/kline_chart.png)

**图表说明**
- **上半部分** - 价格走势
  - 蜡烛图（红涨绿跌）
  - 蓝色虚线：20日均线
  - 橙色虚线：60日均线

- **下半部分** - 成交量柱状图
  - 红色：当日上涨
  - 绿色：当日下跌
  - 高度：成交量大小

- **导航按钮**
  - ← 上一只：查看前一只股票
  - 下一只 →：查看后一只股票
  - 显示当前位置（如 3/10）

### 企业微信推送效果

![微信推送](screenshots/wechat_push.png)

**推送内容展示**
- 标题和日期
- 今日摘要信息
- 近3日趋势对比
- 连续强势股标记
- 详细股票列表

**消息特点**
- Markdown格式排版
- 图标标识清晰
- 层次分明易读
- 支持推送到多个群

### Windows定时任务

![定时任务](screenshots/task_scheduler.png)

**任务配置**
- 任务名称：TradeAnalytics 股票分析
- 执行时间：每天 15:30
- 执行程序：run_analysis.bat
- 状态：就绪/正在运行

**特点**
- 开机自动启动
- 只在工作日执行
- 失败自动重试
- 详细执行日志

### 运行日志

![运行日志](screenshots/running_logs.png)

**日志内容**
- 启动信息
- 数据下载进度
- 分析过程
- 结果统计
- 错误信息

**日志文件位置**
- `logs/task_scheduler.log` - 定时任务日志
- `logs/data_downloader.log` - 数据下载日志
- `logs/volume_analyzer.log` - 分析日志
- `logs/notification.log` - 推送日志

### 日志文件目录

![日志目录](screenshots/logs.png)

**文件说明**
- 所有日志自动保存
- 按模块分类存储
- 包含时间戳
- 便于追踪问题

---

## 快速入门

### 系统要求

**必需环境**
- Windows 10/11
- Python 3.8 或更高版本
- 网络连接（下载数据）

**推荐配置**
- CPU：双核以上
- 内存：4GB以上
- 硬盘：5GB可用空间

### 安装步骤

#### 1. 安装Python

访问 https://www.python.org/downloads/
- 下载Python 3.8+
- 安装时勾选"Add Python to PATH"

#### 2. 下载项目

```bash
# 方法1：Git克隆
git clone https://github.com/your-repo/TradeAnalytics.git
cd TradeAnalytics

# 方法2：下载ZIP
# 下载并解压到任意目录
```

#### 3. 安装依赖

```bash
pip install -r requirements.txt
```

依赖包括：
- pandas - 数据处理
- matplotlib - 图表绘制
- baostock - 数据源
- requests - 网络请求

#### 4. 首次运行

```bash
python main.py
```

**首次运行步骤**
1. 点击"下载股票列表" - 获取最新股票清单
2. 点击"下载历史数据" - 下载所有股票数据（需要1-2小时）
3. 点击"成交量分析" - 执行第一次分析
4. 查看结果表格

### 5分钟快速体验

如果想快速体验功能（不下载全部数据）：

```bash
# 只下载指定股票
python download_stock_002733.py  # 下载单只股票示例

# 运行分析
python main.py
# 点击"成交量分析"
```

---

## 功能详解

### 数据下载

#### 下载股票列表

**功能**：获取A股所有股票的代码和名称

**操作**：
1. 点击"下载股票列表"按钮
2. 等待下载完成（约10秒）
3. 结果保存在 `data/stocks/stock_list.csv`

**数据内容**：
```csv
code,name
sh.600000,浦发银行
sz.000001,平安银行
...
```

#### 下载历史数据

**功能**：批量下载所有股票的历史K线数据

**操作**：
1. 点击"下载历史数据"按钮
2. 等待下载完成（约1-2小时，取决于网络速度）
3. 进度条显示下载进度
4. 数据保存在 `data/daily/` 目录

**数据说明**：
- 数据源：BaoStock（默认）或AkShare
- 数据周期：日K线
- 历史长度：最近150天
- 数据格式：CSV文件

**增量更新**：
- 第二次下载只更新新数据
- 速度很快（几分钟）
- 建议每天更新一次

### 成交量分析

#### 分析过程

**步骤1：读取数据**
- 扫描 `data/daily/` 目录
- 读取所有股票的CSV文件
- 约4000+只股票

**步骤2：计算指标**
- 计算20日移动平均线
- 计算前7日平均成交量
- 计算成交量倍数

**步骤3：筛选股票**
```python
# 筛选条件
if (当日成交量 / 前7日平均成交量) >= 5.0:
    if 收盘价 > 20日均线:
        # 符合条件！
        add_to_results()
```

**步骤4：排序结果**
- 按成交量倍数降序排列
- 倍数最高的排在最前面

#### 结果表格

**表格列说明**

| 列名 | 说明 | 示例 |
|------|------|------|
| 股票代码 | 6位数字代码 | 002733 |
| 股票名称 | 股票简称 | 雄韬股份 |
| 日期 | 触发日期 | 2026-02-25 |
| 收盘价 | 当日收盘价 | 21.38 |
| 均线 | 20日均线 | 20.30 |
| 成交量 | 当日成交量 | 30,350,815 |
| 7日平均 | 前7日平均量 | 4,067,295 |
| 倍数 | 成交量倍数 | 7.46 |

**操作说明**
- 单击列标题：按该列排序
- 双击行：查看该股票的K线图
- 右键：导出当前结果

#### 导出结果

**自动保存**
- 每次分析结果自动保存
- 位置：`data/results/volume_surge_YYYYMMDD_HHMMSS.csv`
- 格式：UTF-8 CSV

**手动导出**
- 右键点击表格
- 选择"导出"
- 选择保存位置

### K线图查看

#### 打开方式

1. 在结果表格中双击任意股票
2. 或选中股票后点击"查看K线图"按钮

#### 图表操作

**导航**
- 点击"← 上一只"：查看前一只股票
- 点击"下一只 →"：查看后一只股票
- 显示当前位置：3/10（第3只，共10只）

**缩放**
- 鼠标滚轮：放大/缩小
- 拖拽：移动查看不同区域
- 右键：重置视图

**导出图片**
- 点击窗口工具栏的"保存"按钮
- 选择保存位置和文件名
- 格式：PNG

#### 技术指标说明

**移动平均线（MA）**
- 蓝色虚线：20日均线
- 橙色虚线：60日均线
- 用途：判断价格趋势

**成交量柱状图**
- 高度：成交量大小
- 颜色：红色上涨，绿色下跌
- 异常放量：柱子明显突出

### 微信推送配置

#### 企业微信（推荐）

**优势**
- 完全免费
- 推送无限次
- 支持多人共享
- 个人可注册

**配置步骤**

1. **创建企业微信**（5分钟）
   - 访问 https://work.weixin.qq.com/
   - 注册个人企业（免费）
   - 下载企业微信APP

2. **创建群聊**（1分钟）
   - 在企业微信中创建群
   - 命名为"股票分析VIP群"

3. **添加机器人**（1分钟）
   - 群聊点右上角"..."
   - 选择"群机器人"
   - 点击"添加机器人"
   - 复制Webhook地址

4. **配置程序**（1分钟）
   
编辑 `config/config.ini`：
```ini
[Notification]
enabled = true
push_type = qywechat
qywechat_webhook = https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=你的key
```

5. **测试推送**（30秒）
```bash
python test_push.py
```

查看企业微信群，应该收到测试消息。

#### 其他推送方式

**Server酱**
- 个人推送，推送到微信
- 免费版：5次/天
- 配置：获取SendKey填入配置文件

**PushPlus**
- 免费200次/天
- 支持多种推送方式
- 配置：获取Token填入配置文件

**详细配置文档**
- 企业微信：`VIP_GROUP_QUICKSTART.md`
- Server酱：`WECHAT_PUSH_SETUP.md`
- 完整对比：`PUSH_METHODS_COMPARISON.md`

### 定时任务

#### Windows任务计划

**快速配置**

1. 按 `Win + R`，输入 `taskschd.msc`
2. 点击"创建基本任务"
3. 填写信息：
   - 名称：TradeAnalytics 股票分析
   - 描述：每日自动分析
4. 触发器：每天
5. 开始时间：15:30（收盘后30分钟）
6. 操作：启动程序
   - 程序：`E:\code\TradeAnalytics\run_analysis.bat`
   - 起始位置：`E:\code\TradeAnalytics`
7. 完成配置

**验证任务**

```bash
check_task.bat
```

查看：
- 任务是否创建成功
- 下次运行时间
- 最近执行记录

**详细配置文档**
- 快速配置：`WINDOWS_SCHEDULER_SUMMARY.md`
- 完整说明：`WINDOWS_SCHEDULER_SETUP.md`

---

## 配置说明

### config/config.ini 详解

#### [Analysis] 分析参数

```ini
[Analysis]
# 均线周期（天）
ma_period = 20
# 建议：20-60天
# 说明：用于计算移动平均线，判断价格趋势

# 成交量倍数阈值
volume_ratio_threshold = 5.0
# 建议：3.0-10.0
# 说明：当日成交量需达到前7日平均的N倍

# 最小历史天数
min_history_days = 30
# 建议：30-150天
# 说明：股票数据少于此天数将被跳过
```

#### [Notification] 推送配置

```ini
[Notification]
# 是否启用推送
enabled = true

# 推送类型
push_type = qywechat
# 可选：qywechat, serverchan, pushplus, wechat_official

# 企业微信Webhook
qywechat_webhook = https://qyapi.weixin.qq.com/...

# 推送历史天数
push_history_days = 3
# 说明：推送消息中显示近N天的趋势对比

# 每次推送最多股票数
push_max_stocks = 20
# 说明：避免消息过长
```

#### [Scheduler] 定时任务

```ini
[Scheduler]
# 是否启用定时执行
enabled = true

# 执行时间（HH:MM）
run_time = 15:30
# 建议：15:30-16:00（收盘后）

# 只在工作日执行
weekdays_only = true
# 说明：周末不执行
```

### 调整筛选条件

#### 放宽条件（找到更多股票）

```ini
[Analysis]
ma_period = 10  # 缩短均线周期
volume_ratio_threshold = 3.0  # 降低成交量要求
```

#### 收紧条件（提高质量）

```ini
[Analysis]
ma_period = 60  # 延长均线周期
volume_ratio_threshold = 10.0  # 提高成交量要求
```

---

## 常见问题

### 数据相关

**Q: 为什么周末运行找不到数据？**

A: BaoStock是T+1数据，周末没有交易，最新数据是周五的。这是正常的。

**Q: 数据下载很慢怎么办？**

A: 
1. 检查网络连接
2. 切换数据源（baostock ↔ akshare）
3. 减少并发线程数
4. 分批下载

**Q: 如何更新数据？**

A: 再次点击"下载历史数据"，会自动增量更新，速度很快。

### 分析相关

**Q: 为什么找不到符合条件的股票？**

A: 可能原因：
1. 配置太严格（ma_period=120，数据不足）
2. 当天确实没有成交量暴涨的股票
3. 数据未更新

解决：
- 修改 `ma_period = 20`
- 查看诊断脚本：`python diagnose_analysis.py`

**Q: 分析结果为0怎么办？**

A: 
1. 运行诊断：`python diagnose_analysis.py`
2. 检查配置：`type config\config.ini`
3. 查看日志：`type logs\volume_analyzer.log`

**Q: 如何调整筛选标准？**

A: 编辑 `config/config.ini`，修改 `volume_ratio_threshold` 和 `ma_period`。

### 推送相关

**Q: 推送失败怎么办？**

A: 
1. 测试推送：`python test_push.py`
2. 检查Webhook地址是否正确
3. 查看日志：`type logs\notification.log`

**Q: 可以推送到多个群吗？**

A: 可以！在配置中用逗号分隔多个Webhook：
```ini
qywechat_webhook = webhook1,webhook2,webhook3
```

**Q: 推送次数有限制吗？**

A: 企业微信无限制，完全免费。Server酱免费版5次/天。

### 定时任务相关

**Q: 定时任务没有执行？**

A: 
1. 检查任务：`check_task.bat`
2. 查看日志：`type logs\scheduler.log`
3. 确认电脑开机
4. 检查任务状态（是否禁用）

**Q: 如何修改执行时间？**

A: 
1. 修改 `config/config.ini` 中的 `run_time`
2. 或在任务计划程序中修改触发器

### 性能相关

**Q: 程序运行很慢？**

A: 
1. 减少数据天数：`min_history_days = 30`
2. 增加线程数（如果网络好）：`max_workers = 10`
3. 只分析关注的股票

**Q: 占用磁盘空间太大？**

A: 
- 4000只股票约2-3GB
- 可以删除不关注的股票数据
- 定期清理旧的分析结果

---

## 技术支持

### 日志查看

**查看最近日志**
```bash
# 分析日志
type logs\volume_analyzer.log | more

# 推送日志  
type logs\notification.log | more

# 定时任务日志
type logs\scheduler.log | more
```

### 问题诊断

**诊断脚本**
```bash
# 诊断成交量分析
python diagnose_analysis.py

# 测试推送功能
python test_push.py

# 检查定时任务
check_task.bat
```

### 文档索引

**快速入门**
- `README.md` - 项目主文档
- `QUICKSTART_PUSH.md` - 推送快速配置

**详细说明**
- `VIP_GROUP_PUSH_SETUP.md` - 企业微信详细配置
- `WINDOWS_SCHEDULER_SUMMARY.md` - 定时任务配置
- `VOLUME_ANALYSIS_FIX.md` - 分析逻辑说明

**问题解决**
- `DIAGNOSIS_ZERO_RESULTS.md` - 0结果诊断
- `STOCK_002733_ISSUE.md` - 特定问题案例
- `FAQ.md` - 常见问题汇总

### 联系方式

- **问题反馈**：GitHub Issues
- **功能建议**：GitHub Discussions
- **使用交流**：企业微信交流群

---

## 更新日志

### v2.0.0 (2026-02-25)

**新功能**
- ✨ 企业微信VIP群推送
- ✨ 多群同时推送
- ✨ 历史趋势对比
- ✨ 连续强势股识别
- ✨ 诊断工具和脚本

**优化**
- 🔧 修复成交量分析逻辑
- 🔧 扩大分析范围（10天→30天）
- 🔧 添加数据日期显示
- 🔧 优化均线计算

**文档**
- 📝 完整的配置文档
- 📝 详细的使用说明
- 📝 问题诊断指南

### v1.0.0 (2026-01-01)

- 🎉 初始版本发布
- ✅ 基础数据下载
- ✅ 成交量分析
- ✅ K线图可视化
- ✅ GUI界面

---

## 免责声明

⚠️ **重要提示**

1. 本软件仅供学习和研究使用
2. 股市有风险，投资需谨慎
3. 分析结果仅供参考，不构成投资建议
4. 投资决策由用户自行负责
5. 开发者不对任何投资损失负责

---

## 开源协议

本项目采用 MIT 许可证。

---

<div align="center">

**感谢使用 TradeAnalytics！**

如有问题或建议，欢迎反馈交流。

Made with ❤️ by TradeAnalytics Team

</div>
