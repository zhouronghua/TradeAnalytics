# 股票分析软件 (TradeAnalytics)

基于Python的A股股票数据分析工具，自动下载沪深A股交易数据，筛选符合条件的股票。

![Python Version](https://img.shields.io/badge/python-3.8+-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

## 项目简介

TradeAnalytics 是一款专为A股投资者设计的自动化数据分析工具。它能够：

- 每日自动下载沪深两市所有A股的交易数据
- 智能增量更新，避免重复下载
- 基于技术指标自动筛选符合条件的股票
- 提供友好的图形化界面
- 支持定时任务自动执行
- 所有数据本地存储，安全可靠

## 核心特性

- **自动化数据获取**: 使用AkShare免费数据源，无需API密钥
- **增量下载机制**: 首次运行后，每天只下载新增数据，节省时间
- **灵活的筛选条件**: 
  - 成交量突然放大（默认5倍以上）
  - 价格在120日均线上方
  - 可自定义调整参数
- **定时任务**: 支持每日自动执行（默认收盘后15:30）
- **直观的GUI界面**: 基于Tkinter，简单易用
- **完善的日志系统**: 记录所有操作，便于追踪和调试

## 功能特点

- 自动下载沪深A股所有股票的交易数据
- 计算120日移动平均线
- 筛选成交量增加5倍以上且价格在120日均线上的股票
- 定时任务自动执行分析
- 图形化界面，操作简便
- 本地CSV文件存储，数据安全可靠

## 系统要求

- Python 3.8 或以上版本
- Windows/Linux/macOS 操作系统
- 网络连接（用于下载股票数据）

## 快速开始

### 方法1：使用启动脚本（推荐）

**Windows用户**:
```bash
双击运行 run.bat
```

**Linux/Mac用户**:
```bash
./run.sh
```

启动脚本会自动检查Python和依赖包，并提示安装缺失的组件。

### 方法2：手动安装

1. **克隆或下载本项目**

2. **安装依赖包**：
```bash
# 使用国内镜像源（推荐）
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# 或使用默认源
pip install -r requirements.txt
```

3. **运行测试**：
```bash
python test_basic.py
```

4. **启动程序**：
```bash
python main.py
```

详细安装说明请参考 [INSTALL.md](INSTALL.md)

## 使用指南

### 首次运行

1. 启动程序后，点击"立即执行分析"
2. 程序会下载所有A股列表和历史数据（约30-60分钟）
3. 下载完成后自动进行筛选分析
4. 结果显示在界面上，并保存到 `data/results/` 目录

### 日常使用

- **自动模式**: 程序默认每天15:30自动执行（只下载当天新数据）
- **手动模式**: 随时点击"立即执行分析"按钮
- **增量下载**: 第二天起只下载新增数据，通常几分钟完成

### 主要功能

| 功能 | 说明 |
|------|------|
| 立即执行分析 | 手动触发一次完整的下载和分析流程 |
| 查看历史结果 | 浏览过去30天的筛选结果 |
| 导出结果 | 将当前结果导出为CSV文件 |
| 设置 | 调整筛选条件、定时任务等参数 |

详细使用说明请参考 [QUICK_START.md](QUICK_START.md)

## 配置说明

配置文件位于 `config/config.ini`，主要参数：

| 参数 | 说明 | 默认值 |
|------|------|--------|
| `ma_period` | 均线周期（天） | 120 |
| `volume_ratio_threshold` | 成交量倍数阈值 | 5.0 |
| `run_time` | 定时任务执行时间 | 15:30 |
| `max_workers` | 下载并发数 | 10 |
| `min_history_days` | 历史数据天数 | 150 |

**修改方式**：
1. 通过GUI界面：点击"设置"按钮
2. 直接编辑：修改 `config/config.ini` 文件

## 数据说明

### 存储结构

```
TradeAnalytics/
├── config/              # 配置文件
│   └── config.ini
├── data/                # 数据目录
│   ├── daily/          # 日线数据（约5000个CSV文件）
│   ├── stocks/         # 股票列表
│   └── results/        # 筛选结果
├── logs/               # 日志文件
├── src/                # 源代码
└── main.py            # 程序入口
```

### 增量下载说明

程序采用智能增量下载机制：

| 运行时间 | 下载内容 | 耗时 |
|----------|----------|------|
| 首次运行 | 最近150天的所有数据 | 30-60分钟 |
| 第二天起 | 只下载最新一天的数据 | 3-5分钟 |
| 重复运行 | 检测到最新则跳过 | 几秒钟 |

### 输出结果

筛选结果文件（`data/results/filtered_YYYYMMDD.csv`）包含：

| 字段 | 说明 |
|------|------|
| 股票代码 | 6位数字代码 |
| 股票名称 | 中文名称 |
| 日期 | 数据日期 |
| 收盘价 | 当日收盘价 |
| 120日均线 | MA120值 |
| 成交量 | 当日成交量 |
| 前日成交量 | 前一日成交量 |
| 成交量倍数 | 当日/前日 |

## 注意事项

1. 首次运行会下载大量历史数据（约5000只股票），需要较长时间，请耐心等待
2. 建议在非交易时间或收盘后运行，避免数据延迟
3. 网络不稳定时可能导致部分股票数据下载失败，会自动跳过并记录日志
4. 新上市不足120天的股票无法计算均线，会自动过滤

## 技术架构

### 技术栈

| 组件 | 技术 | 说明 |
|------|------|------|
| 编程语言 | Python 3.8+ | 主要开发语言 |
| 数据源 | AkShare | 免费金融数据接口 |
| 数据处理 | pandas, numpy | 数据分析和计算 |
| 数据存储 | CSV文件 | 简单可靠的本地存储 |
| 用户界面 | Tkinter | Python内置GUI库 |
| 定时任务 | schedule | 轻量级任务调度 |

### 模块设计

```
src/
├── utils.py             # 工具函数和日志
├── data_downloader.py   # 数据下载模块
├── data_analyzer.py     # 数据分析模块
├── stock_filter.py      # 股票筛选模块
├── scheduler.py         # 定时任务模块
└── gui.py              # GUI界面模块
```

### 工作流程

```
启动程序
    ↓
加载配置
    ↓
初始化GUI界面
    ↓
启动定时任务（可选）
    ↓
等待用户操作 / 定时触发
    ↓
1. 下载股票列表
2. 增量下载交易数据
3. 计算技术指标
4. 筛选符合条件的股票
5. 保存结果
6. 显示结果
```

## 许可证

本项目仅供学习和研究使用，不构成投资建议。股市有风险，投资需谨慎。

## 联系方式

如有问题或建议，请提交Issue。
