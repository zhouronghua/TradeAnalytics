# 价格差异问题说明

## 问题描述

用户发现 `600343.csv` 文件中的价格与实际不符：
- 文件显示：53-55元
- 实际价格：34.32元

## 原因分析

### 1. 数据来源不同

查询BaoStock数据（2026-02-06）：
```
前复权价格: 34.32 元
不复权价格: 34.32 元
```

**结论**：BaoStock的数据是正确的（34.32元）

### 2. 文件中的旧数据

`600343.csv` 文件最后10行：
```
2026-02-06,53.0,56.18,52.01,55.12,53932046,2953426843
```

**问题**：这是之前运行时使用AkShare下载的数据，可能因为：
- AkShare的复权算法不同
- 下载时的配置不同
- 数据源本身的问题

### 3. 数据源对比

| 数据源 | 600343价格 | 说明 |
|--------|-----------|------|
| AkShare（旧数据） | 53-55元 | 文件中的数据 |
| BaoStock（当前） | 34.32元 | 与实际一致 ✓ |
| 实际市场价格 | 34.32元 | 正确 |

## 解决方案

### 方案1：删除旧数据，重新下载（推荐）

删除所有旧的股票数据，让程序用BaoStock重新下载：

```bash
# Windows PowerShell
Remove-Item data\daily\*.csv
```

然后运行程序，会用BaoStock重新下载所有数据。

### 方案2：只删除600343的数据

```bash
Remove-Item data\daily\600343.csv
```

然后在程序中重新下载这只股票。

### 方案3：验证所有数据

如果担心其他股票也有问题，建议全部删除重新下载。

## 关于复权的说明

### 什么是复权？

股票因分红、配股等会导致价格跳空，复权是调整历史价格使其连续。

### 三种复权方式

1. **前复权**：
   - 保持最新价格不变
   - 调整历史价格
   - 适合：技术分析、计算均线 ✓

2. **后复权**：
   - 保持最早价格不变
   - 调整最新价格
   - 适合：计算收益率

3. **不复权**：
   - 显示真实历史价格
   - 会出现跳空缺口
   - 适合：查看实际价格

### 当前配置

BaoStock使用**前复权**（adjustflag="2"），这是最适合技术分析的方式。

## 为什么BaoStock的前复权价格是真实价格？

在没有分红配股的时期，前复权价格 = 真实价格。

600343近期可能没有分红配股事件，所以：
- 前复权：34.32元
- 不复权：34.32元
- 实际价格：34.32元

**三者一致，数据正确！**

## 下一步

建议执行以下命令清理旧数据：

```powershell
# 删除所有旧的股票数据
Remove-Item data\daily\*.csv -Force

# 删除股票列表缓存（可选）
Remove-Item data\stocks\stock_list.csv -Force
```

然后重新运行 `python main.py`，程序会用BaoStock下载正确的数据。

## 总结

- ❌ 文件中的53元数据：AkShare旧数据，不准确
- ✅ BaoStock的34.32元：正确，与市场价格一致
- ✅ 解决方法：删除旧数据，用BaoStock重新下载
