# 模拟数据说明 - 为什么会看到已退市的邯郸钢铁？

## 问题

用户发现：
- 邯郸钢铁(600001)已于2009年退市
- 但在演示中看到了600001的数据
- 而且还有"今天"的交易数据

## 答案

**您看到的是模拟数据，不是真实市场数据！**

## 详细说明

### 1. 两种数据来源

#### A. 模拟数据（演示用）

**文件**：`demo_with_mock_data.py`, `test_gui.py`

**代码**：
```python
# demo_with_mock_data.py 第32行
stock_list = pd.DataFrame({
    'code': ['000001', '000002', '000003', '600000', '600001'],
    'name': ['平安银行', '万科A', '国农科技', '浦发银行', '邯郸钢铁'],  # ← 硬编码
    'price': [15.20, 12.50, 18.80, 10.30, 5.60],
})

# 生成随机数据
for stock_code in ['000001', '000002', '000003', '600000', '600001']:
    volumes = np.random.uniform(1000000, 5000000, 150)  # ← 随机生成
    prices = base_price * (1 + np.random.normal(0, 0.02, 150)).cumprod()  # ← 随机生成
```

**特点**：
- ❌ 不是真实数据
- ❌ 包含已退市股票（600001）
- ❌ 价格和成交量都是随机生成的
- ✓ 只用于演示功能
- ✓ 不需要网络连接
- ✓ 运行速度快

#### B. 真实数据（实际使用）

**文件**：`main.py` → `data_downloader.py`

**代码**：
```python
# data_downloader.py
def download_stock_list(self):
    # 从AkShare获取真实的在市股票列表
    stock_list = ak.stock_zh_a_spot_em()
    # ↑ 这个API只返回当前正在交易的股票
    # 自动过滤：
    # - 已退市的股票（如邯郸钢铁600001）
    # - ST股票的标记
    # - 停牌信息
    return stock_list
```

**特点**：
- ✓ 真实市场数据
- ✓ 自动过滤退市股票
- ✓ 只包含当前在市股票
- ✓ 实时更新
- ❌ 需要网络连接
- ❌ 首次下载需要30-60分钟

### 2. AkShare的数据源

```
东方财富网 → AkShare → 您的程序
    ↑
只提供在市股票
```

**AkShare的`stock_zh_a_spot_em()`接口**：
- 从东方财富网获取数据
- 只返回当前A股市场正在交易的股票
- **不会**返回已退市的股票
- **不会**返回已被并购的股票

### 3. 邯郸钢铁(600001)的真实情况

| 项目 | 信息 |
|------|------|
| 股票代码 | 600001 |
| 公司名称 | 邯郸钢铁股份有限公司 |
| 上市时间 | 1998年1月22日 |
| 上市地点 | 上海证券交易所 |
| 退市时间 | 2009年12月29日 |
| 退市原因 | 被唐钢股份换股吸收合并 |
| 现状 | 已成为河钢集团（000709）的一部分 |

**真实情况**：
- ❌ 600001不再交易
- ❌ AkShare不会返回600001
- ❌ 真实程序不会下载600001的数据
- ✓ 如果想查河钢集团，应查000709

### 4. 如何区分模拟数据和真实数据

#### 检查方法1：看文件数量

```bash
# 模拟数据
data/daily/  # 只有5个CSV文件
├── 000001.csv
├── 000002.csv
├── 000003.csv
├── 600000.csv
└── 600001.csv  ← 模拟的，不存在的股票

# 真实数据
data/daily/  # 应该有约5000个CSV文件
├── 000001.csv  ← 真实的平安银行
├── 000002.csv  ← 真实的万科A
├── 000004.csv  ← 真实的国华网安
├── ...
└── 688xxx.csv  ← 科创板股票
（注意：不会有600001.csv）
```

#### 检查方法2：看股票列表

```bash
# 模拟数据的股票列表
data/stocks/stock_list.csv
代码    名称
000001  平安银行
000002  万科A
000003  国农科技  ← 可能也不存在
600000  浦发银行
600001  邯郸钢铁  ← 已退市！

# 真实数据的股票列表
data/stocks/stock_list.csv
代码    名称        最新价  成交量    ...
000001  平安银行    15.20   123456789  ...
000002  万科A       12.50   98765432   ...
000004  国华网安    38.90   45678901   ...
...（约5000只真实在市股票）
（注意：不会有600001）
```

#### 检查方法3：看数据日期

```bash
# 模拟数据：日期是连续的150天（包括周末）
data/daily/600001.csv
日期
2025-09-09  ← 连续日期
2025-09-10  ← 包括周末
2025-09-11
...

# 真实数据：只有交易日
data/daily/000001.csv
日期
2025-09-09  ← 周一
2025-09-10  ← 周二
2025-09-11  ← 周三
2025-09-12  ← 周四
2025-09-13  ← 周五
2025-09-16  ← 下周一（跳过周末）
```

### 5. 如何获取真实数据

#### 步骤1：清理模拟数据

```bash
# 删除模拟数据
cd E:\code\TradeAnalytics
rmdir /s data\daily
rmdir /s data\stocks
rmdir /s data\results

# 或保留目录，只删除CSV文件
del data\daily\*.csv
del data\stocks\*.csv
del data\results\*.csv
```

#### 步骤2：运行真实下载

```bash
# 启动程序
python main.py

# 在GUI中：
1. 点击"立即执行分析"
2. 确认对话框
3. 等待下载（30-60分钟）
4. 查看结果
```

#### 步骤3：验证真实数据

```bash
# 检查股票数量
dir data\daily\*.csv /s
# 应该显示约5000个文件

# 检查是否有600001
dir data\daily\600001.csv
# 应该显示"找不到文件"

# 查看股票列表
python -c "import pandas as pd; df = pd.read_csv('data/stocks/stock_list.csv'); print(f'股票数量: {len(df)}'); print('600001在列表中:', '600001' in df['code'].values)"
# 应该显示：
# 股票数量: 5000（左右）
# 600001在列表中: False
```

### 6. 为什么要创建模拟数据？

#### 原因

1. **演示功能**：不需要等待真实下载
2. **离线测试**：不需要网络连接
3. **快速验证**：几秒钟就能看到效果
4. **示例代码**：展示数据格式

#### 用途

```bash
# 演示筛选功能
python demo_with_mock_data.py  # 用模拟数据

# 演示GUI功能
python test_gui.py  # 用模拟数据

# 真实使用
python main.py  # 用真实数据
```

### 7. 总结

| 特征 | 模拟数据 | 真实数据 |
|------|----------|----------|
| 数据来源 | 随机生成 | AkShare API |
| 股票数量 | 5只 | 约5000只 |
| 包含退市股票 | ❌ 是（600001） | ✓ 否 |
| 数据真实性 | ❌ 假数据 | ✓ 真数据 |
| 需要网络 | ✓ 否 | ❌ 是 |
| 下载时间 | 1秒 | 30-60分钟 |
| 适用场景 | 演示、测试 | 实际使用 |

### 8. 建议操作

#### 如果要体验功能（无需真实数据）

```bash
python demo_with_mock_data.py  # 快速演示
python test_gui.py             # 查看界面
```

#### 如果要真实使用（需要真实数据）

```bash
# 1. 清理模拟数据
del data\daily\*.csv
del data\stocks\*.csv
del data\results\*.csv

# 2. 启动真实程序
python main.py

# 3. 点击"立即执行分析"
# 4. 等待30-60分钟
# 5. 查看真实结果（不会有600001）
```

## 关键要点

1. ✅ **模拟数据只是演示**，包含的600001是假数据
2. ✅ **真实使用时**，AkShare只会返回当前在市股票
3. ✅ **邯郸钢铁(600001)已退市**，不会出现在真实数据中
4. ✅ **如需查河钢相关**，应查000709（河钢股份）
5. ✅ **程序设计正确**，会自动过滤退市股票

希望这个解释清楚了！您的观察非常敏锐，这确实是一个很好的问题。模拟数据只是为了快速演示功能，真实使用时不会有这个问题。
