# 快速入门指南

## 安装步骤

### 1. 安装Python依赖

确保已安装Python 3.8或更高版本，然后运行：

```bash
pip install -r requirements.txt
```

### 2. 验证安装

运行测试确保依赖安装成功：

```bash
python -c "import akshare; import pandas; import numpy; import schedule; print('所有依赖安装成功')"
```

## 运行程序

### 启动GUI界面

直接运行主程序：

```bash
python main.py
```

## 使用说明

### 首次使用

1. **点击"立即执行分析"按钮**
   - 程序会自动下载所有A股股票列表（约5000只）
   - 下载每只股票最近150天的历史数据
   - 首次下载需要较长时间（约30-60分钟），请耐心等待
   - 可以在"运行日志"标签页查看实时进度

2. **等待分析完成**
   - 下载完成后自动进行股票筛选
   - 筛选结果会显示在"筛选结果"标签页
   - 结果自动保存在 `data/results/` 目录

### 日常使用

1. **自动执行（推荐）**
   - 程序默认在每个交易日15:30自动执行分析
   - 第二天开始，只会增量下载最新的数据
   - 无需手动操作

2. **手动执行**
   - 点击"立即执行分析"按钮
   - 程序会自动检测本地数据，只下载缺失的日期
   - 增量下载通常只需要几分钟

3. **查看历史结果**
   - 点击"查看历史结果"按钮
   - 选择要查看的日期
   - 结果会显示在表格中

4. **导出结果**
   - 点击"导出结果"按钮
   - 选择保存位置
   - 结果以CSV格式导出

## 筛选条件说明

程序会筛选出同时满足以下条件的股票：

1. **成交量增加5倍以上**
   - 当日成交量 / 前一日成交量 >= 5.0
   - 说明该股票成交量突然放大

2. **价格在120日均线上方**
   - 当日收盘价 >= 120日移动平均线
   - 说明该股票处于相对强势

## 配置说明

### 修改筛选条件

点击"设置"按钮，可以修改：

- **均线周期**：默认120天，可根据需要调整
- **成交量倍数阈值**：默认5倍，可改为3倍、10倍等
- **执行时间**：默认15:30（收盘后），可自行调整

### 配置文件

高级用户可直接编辑 `config/config.ini` 文件：

```ini
[Analysis]
ma_period = 120              # 均线周期
volume_ratio_threshold = 5.0 # 成交量倍数阈值

[Scheduler]
enabled = true               # 是否启用定时任务
run_time = 15:30            # 执行时间

[Download]
max_workers = 10            # 下载并发数（建议不超过10）
```

## 数据说明

### 数据存储位置

```
data/
├── daily/              # 每只股票的日线数据（约5000个CSV文件）
├── stocks/             # 股票列表
│   └── stock_list.csv
└── results/            # 筛选结果
    └── filtered_YYYYMMDD.csv
```

### 增量下载机制

- **首次运行**：下载最近150天的历史数据
- **第二天起**：只下载本地最新日期之后的数据
- **自动跳过**：如果今天已下载，再次运行会自动跳过

例如：
- 2月6日首次运行：下载2023-09-09至2024-02-06的数据
- 2月7日再次运行：只下载2024-02-07的数据（增量）
- 2月7日重复运行：检测到已是最新，跳过下载

## 注意事项

### 1. 网络连接

- 需要稳定的网络连接
- 数据源为AkShare，从东方财富等网站获取数据
- 如果下载失败，程序会自动重试3次

### 2. 交易日判断

- 程序会自动跳过周末
- 节假日需要手动确认（建议在设置中关闭周末检查）

### 3. 数据质量

- AkShare数据可能有延迟，建议在收盘后30分钟执行
- 停牌股票会自动跳过
- 新股（上市不足120天）无法计算均线，会被过滤

### 4. 性能建议

- 首次下载时间较长，建议在非高峰时段进行
- 下载并发数不建议超过10，避免IP被封
- 日志文件自动保留30天，定期清理

## 故障排除

### 问题1：pip install失败

**解决方案**：
```bash
# 使用国内镜像源
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 问题2：下载数据频繁失败

**解决方案**：
- 检查网络连接
- 降低并发数（设置中修改为5或更少）
- 稍后重试

### 问题3：程序无法启动

**解决方案**：
- 检查Python版本（需要3.8+）
- 确认所有依赖已安装
- 查看logs目录下的日志文件

### 问题4：没有符合条件的股票

**说明**：
- 这是正常现象，说明当天市场上没有同时满足两个条件的股票
- 可以在设置中降低成交量倍数阈值（如改为3倍）

## 技术支持

如有问题，请查看：
- `logs/` 目录下的日志文件
- README.md 文件
- 或提交Issue

## 免责声明

本软件仅供学习和研究使用，不构成任何投资建议。
股市有风险，投资需谨慎。使用本软件产生的任何投资决策后果由使用者自行承担。
