# GUI新功能说明

## 已添加的功能

### 1. 成交量暴涨分析按钮

**位置**：控制面板
**功能**：一键分析最近一周内成交量暴涨的股票

**使用方法**：
1. 确保已下载股票数据
2. 点击"成交量暴涨分析"按钮
3. 确认执行
4. 等待分析完成（自动显示结果）

**筛选条件**：
- 成交量 ≥ 前一天的5倍
- 收盘价 > 移动均线（根据数据长度自适应）
- 时间范围：最近一周交易日

---

### 2. 量价图显示功能

**触发方式**：双击结果列表中的任意股票

**图表内容**：
1. **上图**：价格走势
   - 蓝色实线：收盘价
   - 橙色虚线：移动均线（120/60/30日，自适应）
   - 显示最近60个交易日

2. **下图**：成交量柱状图
   - 红色：上涨（收盘价≥开盘价）
   - 绿色：下跌（收盘价<开盘价）
   - 自动标注最高成交量点

**功能按钮**：
- 保存图表：将图表保存为PNG图片
- 关闭：关闭图表窗口

---

## 使用流程

### 完整分析流程

```
1. 启动程序
   python main.py

2. 执行成交量分析
   点击"成交量暴涨分析" → 确认 → 等待结果

3. 查看结果
   - 结果表格自动显示
   - 可以看到股票代码、日期、价格、成交量等信息

4. 查看详细量价图
   双击任意股票 → 弹出量价图窗口

5. 保存图表（可选）
   在量价图窗口点击"保存图表" → 选择保存位置
```

---

## 技术特性

### 数据源
- 使用BaoStock提供的历史数据
- 自动计算移动均线
- 支持120/60/30/10日均线（根据数据长度自适应）

### 性能优化
- 多线程分析，不阻塞界面
- 进度条实时显示分析进度
- 智能跳过无效数据

### 图表特点
- 使用matplotlib绘制专业金融图表
- 支持中文显示（自动选择系统字体）
- 高清晰度（DPI 100）
- 红绿配色符合A股习惯

---

## 注意事项

### 1. 数据准备
- 必须先下载股票数据
- 建议等待数据下载完成（约2-4小时）
- 数据越完整，分析结果越准确

### 2. 系统要求
- Python 3.7+
- matplotlib已安装
- 支持中文字体（Windows自带）

### 3. 性能提示
- 首次分析可能需要1-2分钟（取决于数据量）
- 建议在数据下载完成后使用
- 大量股票分析时请耐心等待

---

## 已安装的依赖

```
matplotlib>=3.5.0  # 图表绘制
pandas>=1.5.0      # 数据处理
numpy>=1.23.0      # 数值计算
```

---

## 示例结果

### 典型分析结果

```
找到 150 只符合条件的股票

TOP 5:
1. 001337: 成交量136倍, 高于均线66.16%
2. 000506: 成交量133倍, 高于均线52.16%
3. 002155: 成交量83倍, 高于均线63.11%
4. 000603: 成交量63倍, 高于均线44.52%
5. 600489: 成交量54倍, 高于均线32.24%
```

### 量价图示例

- 横轴：日期（显示月-日）
- 左纵轴：价格（元）
- 右纵轴：成交量
- 自动缩放，适应数据范围

---

## 快捷键

| 操作 | 快捷键/方法 |
|------|-----------|
| 执行分析 | 点击"成交量暴涨分析"按钮 |
| 查看量价图 | 双击股票行 |
| 关闭图表 | ESC或点击"关闭"按钮 |
| 保存图表 | 点击"保存图表"按钮 |

---

## 常见问题

### Q1: 点击"成交量暴涨分析"没反应？
A: 检查是否有股票数据。查看"数据概览"中的"本地股票数量"，应该>0。

### Q2: 双击股票没有显示图表？
A: 确保选中了有效的股票行，且该股票的数据文件存在。

### Q3: 图表中文显示为方块？
A: Windows系统通常不会有此问题。如遇到，安装SimHei或Microsoft YaHei字体。

### Q4: 分析很慢怎么办？
A: 正常现象。6000+股票分析需要1-2分钟。可以查看进度条了解进度。

### Q5: 能同时打开多个图表窗口吗？
A: 可以。每双击一只股票就会打开一个新的图表窗口。

---

## 下一步建议

1. **先完成数据下载**
   - 等待后台下载完成
   - 确保有足够的有效数据

2. **尝试分析功能**
   - 执行一次成交量暴涨分析
   - 熟悉结果展示方式

3. **探索量价图**
   - 双击几只不同的股票
   - 对比不同股票的走势

4. **保存有价值的图表**
   - 发现感兴趣的股票时保存图表
   - 用于后续研究分析

---

## 更新日志

**2026-02-06**
- ✅ 添加成交量暴涨分析按钮
- ✅ 实现量价图显示功能
- ✅ 支持图表保存
- ✅ 优化中文显示
- ✅ 添加进度提示
