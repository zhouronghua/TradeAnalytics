# 新功能使用指南

## 成交量暴涨分析 + 量价图显示

### 功能概述

现在主界面新增了两个强大功能：
1. **成交量暴涨分析按钮**：一键分析成交量暴涨的股票
2. **量价图显示**：双击股票查看详细的价格和成交量走势图

---

## 使用步骤

### 步骤1：确保数据已下载

查看GUI界面"数据概览"部分：
- **本地股票数量**：应该显示 6000+ （当前已下载6157只）
- **最新数据日期**：应该是最近的交易日

如果数据不足，点击"立即执行分析"等待下载完成。

---

### 步骤2：执行成交量暴涨分析

#### 方法
点击控制面板中的 **"成交量暴涨分析"** 按钮

#### 确认
弹出对话框显示筛选条件：
```
执行成交量暴涨分析？
条件：成交量≥前日5倍 且 价格>均线
```

点击"是"开始分析

#### 等待
- 状态显示"分析中"
- 进度条显示分析进度
- 通常需要1-2分钟（6000+股票）

#### 完成
- 弹出提示"分析完成！找到 XXX 只股票"
- 结果自动显示在表格中
- 按成交量倍数从高到低排序

---

### 步骤3：查看量价图

#### 方法
在结果表格中**双击**任意股票行

#### 显示内容
打开新窗口，包含两个图表：

**上图 - 价格走势**
- 蓝色实线：收盘价
- 橙色虚线：移动均线（120/60/30日，自动选择）
- 显示最近60个交易日
- X轴：日期（月-日格式）
- Y轴：价格（元）

**下图 - 成交量**
- 红色柱：上涨日（收盘≥开盘）
- 绿色柱：下跌日（收盘<开盘）
- X轴：日期
- Y轴：成交量

#### 图表操作
- **保存图表**：点击按钮保存为PNG图片
- **关闭**：关闭图表窗口
- 可以同时打开多个图表窗口

---

## 实际示例

### 当前分析结果

根据已下载的6157只股票数据分析，找到**150只**符合条件的股票：

**TOP 5成交量暴涨股票**：

1. **001337**
   - 日期：2026-02-03
   - 收盘价：56.06元
   - 60日均线：33.74元
   - 高于均线：66.16%
   - 成交量倍数：136倍 🚀

2. **000506**
   - 日期：2026-02-03
   - 收盘价：22.34元
   - 60日均线：14.68元
   - 高于均线：52.16%
   - 成交量倍数：133倍 🚀

3. **002155**
   - 日期：2026-01-30
   - 收盘价：37.00元
   - 60日均线：22.68元
   - 高于均线：63.11%
   - 成交量倍数：83倍 🚀

4. **000603**
   - 日期：2026-02-03
   - 收盘价：49.46元
   - 60日均线：34.22元
   - 高于均线：44.52%
   - 成交量倍数：63倍

5. **600489**
   - 日期：2026-02-03
   - 收盘价：32.95元
   - 60日均线：24.92元
   - 高于均线：32.24%
   - 成交量倍数：54倍

---

## 界面说明

### 控制面板按钮

```
[立即执行分析] [成交量暴涨分析] [查看历史结果] [导出结果] [设置]
```

- **立即执行分析**：执行原有的筛选功能（120日均线 + 成交量5倍）
- **成交量暴涨分析**：新功能，分析最近一周成交量暴涨
- **查看历史结果**：查看之前的分析结果
- **导出结果**：将当前结果导出为CSV
- **设置**：修改筛选参数

### 结果表格

显示找到的股票，包含列：
- 股票代码
- 股票名称
- 日期
- 收盘价
- 均线
- 成交量
- 前日成交量
- 成交量倍数

**提示**：双击任意行查看量价图

---

## 注意事项

### 1. 数据要求
- 必须先下载股票数据
- 数据越完整，分析越准确
- 建议等数据下载完成后再分析

### 2. 分析时间
- 6000+股票分析需要1-2分钟
- 不要重复点击按钮
- 可以查看进度条了解进度

### 3. 图表显示
- 支持中文（使用系统字体）
- 图表大小：1000x700像素
- 可以保存为高清PNG图片（DPI 150）

### 4. ETF基金注意
- 159开头的代码通常是ETF基金
- 可能存在数据异常
- 建议重点关注：000/002/300/600/688开头的普通股票

---

## 常见问题

### Q: 点击"成交量暴涨分析"没反应？
**A**: 检查：
1. 是否已下载数据？查看"本地股票数量"
2. 是否有其他任务在运行？查看状态栏
3. 等待几秒，可能系统正在响应

### Q: 双击股票没有显示图表？
**A**: 确认：
1. 是否双击在股票行上？
2. 该股票的数据文件是否存在？
3. 查看日志是否有错误信息

### Q: 图表中文显示为方块？
**A**: Windows系统通常不会出现此问题。如果遇到：
- 确保系统已安装中文字体（如SimHei、微软雅黑）
- 重启程序

### Q: 为什么找到0只股票？
**A**: 可能原因：
1. 最近一周确实没有符合条件的股票（成交量5倍+价格在均线上）
2. 数据不完整
3. 尝试使用"立即执行分析"功能（条件略有不同）

### Q: 可以调整筛选条件吗？
**A**: 是的。点击"设置"按钮，可以修改：
- MA周期（120日）
- 成交量倍数阈值（5.0）
- 其他参数

---

## 快捷操作

| 操作 | 方法 |
|------|------|
| 执行分析 | 点击"成交量暴涨分析" |
| 查看图表 | 双击股票行 |
| 保存图表 | 图表窗口→"保存图表" |
| 关闭图表 | 点击"关闭"或ESC |
| 导出结果 | 控制面板→"导出结果" |

---

## 技术细节

### 筛选算法
```python
条件1: 当日成交量 / 前日成交量 >= 5.0
条件2: 收盘价 > 移动均线
时间: 最近一周交易日
均线: 根据数据长度自适应(120/60/30/10日)
```

### 数据来源
- BaoStock官方API
- 前复权数据
- T+1延迟（延迟1天）

### 图表技术
- 使用matplotlib绘制
- 金融图表专业样式
- 支持保存为PNG（150 DPI）

---

## 下一步建议

1. **浏览所有结果**
   - 查看完整的150只股票列表
   - 关注成交量倍数最高的

2. **深入分析**
   - 双击感兴趣的股票查看量价图
   - 观察价格走势和成交量关系

3. **保存重要图表**
   - 对于看好的股票保存图表
   - 建立自己的观察列表

4. **定期分析**
   - 每周执行一次成交量分析
   - 跟踪市场热点

---

## 数据状态

当前系统数据：
- ✅ 已下载 6157 只股票
- ✅ BaoStock数据源
- ✅ 数据完整可用
- ✅ 最新数据：2026-02-06

可以立即使用所有功能！

---

## 获取帮助

如有问题：
1. 查看日志标签页（运行日志）
2. 查看日志文件（logs目录）
3. 查看文档：
   - README.md
   - QUICK_START.md
   - GUI_FEATURES_ADDED.md

---

**祝您使用愉快！**
